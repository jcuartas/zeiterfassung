<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <title>Zeiterfassung</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script type="text/javascript" src="cordova.js"></script>
	
	<!-- JavaScript -->
      <script type="text/javascript">
            var startTime;
          
            function millisToMins(seconds)
            {
                var numhours = Math.floor(((((seconds % 31536000) % 86400) % 3600) / 60) / 60);
                var numminutes = Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);
                var numseconds = (((seconds % 31536000) % 86400) % 3600) % 60;
                
                var outCount;
                
                var outhours;
                var outseconds;
                var outminutes;
                var timer;
                
                if (Math.round(numseconds) >= 10)
                {
                    outseconds = Math.round(numseconds);
                }
                else
                {
                    outseconds = "0" + Math.round(numseconds);
                }
                
                if (Math.round(numminutes) >= 10)
                    {
                        outminutes = Math.round(numminutes);
                    }
                else
                {
                        outminutes = "0" + Math.round(numminutes);
                }
                
                if (Math.round(numhours) >= 10)
                    {
                        outhours = Math.round(numhours);
                    }
                else
                    {
                         outhours = "0" + Math.round(numhours);
                    }
                outCount = outhours + ":" + outminutes + ":" + outseconds;
                
                return outCount;   
            }
          
          function startStop(){
              
              if($("#startstop").html() == "Start"){
                  startTime = new Date();
                  // To do: insert data in the database with this startTime.
                $("#startstop").empty();
                $("#startstop").append("Stop");
                $("#startstop").removeClass("btn-success");
                $("#startstop").addClass("btn-danger");
                  // Counter starts
                counterS(startTime);
              }
              else {
                  $("#startstop").empty();
                  $("#startstop").append("Start");
                  $("#startstop").removeClass("btn-danger");
                  $("#startstop").addClass("btn-success");
                  $("#timeShow").empty();
                  $("#timeShow").append("00:00:00");
                  startTime = null;
                  clearInterval(timer);
              }
          }
          
          function counterS(stime){
              timer = setInterval(function () {
                $("#timeShow").empty();
                $("#timeShow").append(millisToMins(Math.floor((new Date() - stime)/1000)));
              }, 1000);
              
          }
      </script>
      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->      <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"></script>

	
	<script type="text/javascript" src="js/index.js"></script>
      <script type="text/javascript" src="js/main.js"></script>
  </head>
  <body onload="qry_benproj();">
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Login</a></li>
            <li><a href="register.html">Register</a></li>
            <li><a href="logout.php">Logout</a></li>
		  </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  <div class="container">
      <div class="row">
            <div class="title col-sm-12" style="text-align:center"><h1>Zeiterfassung</h1></div>  
        </div>
      <div class="row">
        <div class="col-sm-12" style="text-align:center">

            <div class="alert alert-success" role="alert">
                <strong id="timeShow">00:00:00</strong>
            </div>
          </div>
         
      </div>
      <div class="row">
        <div class="col-sm-12" style="text-align: center">
            <div class="alert alert-success" role="alert">
                <strong>Phonegap</strong>
            </div>  
        </div>
      </div>
      <div>
        <div class="row">
            <div class="col-sm-12" style="text-align: center">
                <button id="startstop" onClick="startStop();" type="button" class="btn btn-success">Start</button> <br>
                <button type="button" class="btn btn-warning">Pause</button>
            </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12" style="text-align: center">          
            
            
        <!-- Carousel -->
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
              </ol>
              <div class="carousel-inner" role="listbox">
                <div class="carousel-item active">
                        <h3>Laufende Projekte</h3>
                        <div class="container">
                            <div class="row">
                                <div class="col-sm-1"></div>
                                <div id="laufendeprojekte" class="col-sm-10">
                                </div>
                                <div class="col-sm-1"></div>
                            </div>
                        </div>
                </div>
                <div class="carousel-item">
                        <h3>Pause</h3>
                          <div class="container">
                            <table id="pause" class="table table-hover">
                              <tr>
                                  <th>Projekt No.</th>
                                  <th>StartZeit</th>
                                  <th>Endzeit</th>
                                  <th>Bemerkung</th>
                                  <th>Abrechnen</th>
                                  <th>Nummer</th>
                                  <th>Titel</th>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>21-11-2017 09:00:00</td>
                                    <td>21-11-2017 09:45:00</td>
                                    <td>Pause
                                    </td>
                                    <td>True
                                    </td>
                                    <td>1292l-5543
                                    </td>
                                    <td>Titel
                                    </td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>22-11-2017 09:00:00</td>
                                    <td></td>
                                    <td>Pause
                                    </td>
                                    <td>True
                                    </td>
                                    <td>1292l-5543
                                    </td>
                                    <td>Titel
                                    </td>
                                </tr>
                            </table>
                        </div>
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
            
            
        </div>
      </div>
  </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
          <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script>
  </body>